{% extends 'chatbase.html.twig' %}

{% block body %}
    {%  include 'partials/navbar.html.twig' %}
<div class="container-fluid">
    <div class="row">
        <!-- just sidebar -->
        <div class="row min-vh-100 mt-5 pt-5 flex-column flex-md-row ">
            {% include 'partials/sidebar.html.twig' %}

            <!-- dashboard content -->
            <main class="col-md-9 ml-sm-auto col-lg-10 px-md-4 py-4">
                <div class="container-fluid h-100">
                    <div class="row justify-content-center h-100">
                        <div class="col-md-4 col-xl-3 chat"><div class="card mb-sm-3 mb-md-0 contacts_card">
                                <div class="card-body contacts_body">
                                    <ui class="contacts">
                                        {% for user in users %}
                                            {% if user.id != uid %}
                                                <li>
                                                    <div class="d-flex bd-highlight">
                                                        <div class="img_cont">
                                                            <img src="{{ user.avatar }}" class="rounded-circle user_img">
                                                            <span class="offline_icon"></span>
                                                        </div>
                                                        <div class="user_info">
                                                            <a href="/chat/private/{{ user.id }}">
                                                                {{ user.firstname }} {{ user.lastname }}
                                                            </a>
                                                        </div>
                                                    </div>
                                                </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ui>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 col-xl-6 chat">
                            <div class="card">
                                <div class="card-header msg_head">
                                    <div class="d-flex bd-highlight">
                                        <div class="img_cont">
                                            <img src="{{ ravatar }}" class="rounded-circle user_img">
                                            <span class="online_icon"></span>
                                        </div>
                                        <div class="user_info">
                                            <span>Chat with {{ rname }}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body msg_card_body">
                                    <div id="global-messages">
                                        <div id="new-messages">
                                        </div>
                                        <div id="all-messages">
                                        </div>
                                    </div>
                                </div>

                                <div class="card-footer">
                                    <form onsubmit="event.preventDefault();" id="formUpload" enctype="multipart/form-data">
                                        <input type="hidden" name="uid" id="uid" value="{{ uid }}"/>
                                        <input type="hidden" name="rid" id="rid" value="{{ rid }}"/>

                                        <div class="input-group">
                                            <textarea name="" id="message" class="form-control type_msg" placeholder="Type your message..."></textarea>
                                            <div class="input-group-append">
                                                <span class="input-group-text send_btn btn-orange" id="send-message"><i class="fas fa-location-arrow"></i></span>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>

{% endblock %}